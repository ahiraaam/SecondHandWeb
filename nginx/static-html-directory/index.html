<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>The Community</title>
	<link rel="stylesheet" href="public/css/layout.css">
	<link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
	<script src="public/js/navigation-handler.js"></script>

</head>
<body>
	<header>
		<nav class="navbar navbar-expand-sm primary-color navbar-dark ">
			<!-- Brand/logo -->
				<div class="showIfLoggedIn">
					<a class="btn primary-btn my-2 my-sm-0 my-lg-0 mr-auto" href="/create-petition">Create Petition</a>
				</div>
				<a class="navbar-brand mx-auto" href="/">
					<img src="public/images/book.svg" alt="logo" style="width:50px;">
					SeLec
				</a>
			<ul class="navbar-nav mr-3 ml-auto">
				<li class="showIfLoggedIn nav-item dropdown">
						<p class="nav-link dropdown-toggle" href="#" id="nav-bar-username" data-toggle="dropdown">
							
						</p>
						<div class="dropdown-menu dropdown-menu-right">
							<a id="a-my-petitions"class="dropdown-item">My Petitions</a>
							<a id="a-my-offers"class="dropdown-item" >My Offers</a>
							<a id="a-my-account" class="dropdown-item">My Account</a>
							<a class="dropdown-item" href="/logout">Log Out</a>
						</div>
				</li>
				<li class="showIfLoggedOut nav-item">
						<a href="/login" class="btn primary-btn">Sign In</a>
				</li>
			</ul>
		</nav>
	</header>

	<main >
		<div id="petitions-page" class="container-fluid my-3">
			<div class="row" id="petitions">
                
            </div>
		</div>
		<div id="create-petition-page" class="container col-sm-9 col-md-7 col-lg-8">
			<h2 class="text-center">Create  Petition</h2>
			<form id = "create-petition-form" action="create-petition" method="POST">
				<div class="form-row">
					<div class="form-group col-md-6">
						<label for="title">Title</label>
						<input type="text" id="title" name="title" class="form-control" placeholder="Title" required autofocus>
					</div>
					<div class="form-group col-md-6">
						<label for="author">Author</label>
						<input type="text" id="author" name="author" class="form-control" placeholder="Author" required>
					</div>
				</div>
				<div class="form-row">
					<div class="form-group col-md-6">
						<label for="place">Place</label>
						<input type="text" id="place" name="place" class="form-control" placeholder="Place" required>
					</div>
					<div class="form-group col-md-6">
						<label for="state">State of the book</label>
						<select class="form-control" name="state" id="state" required>
							<option value="new">New</option>
							<option value="used">Used</option>
							<option value="any">Any</option>
						</select>
					</div>
				</div>
				
				<div class="form-group">
					<label for="commentary">Commentary</label>
					<input type="text" id="commentary" name="commentary" class="form-control" placeholder="Commentary">
				</div>
				<div class="form-group">
					<label for="photo">URL Image</label>
					<input type="text" name="photo" id="photo" class="form-control" placeholder="URL Image" value="">
				</div>
				<div class="form-group text-center">
					<input class="btn btn-lg primary-btn text-uppercase" type="submit" value="Create Petition">
				</div>
			</form>
		</div>
		<div id="error-page" class="container-fluid my-3">
			<div class="col-md-6 mx-auto text-center">
				<h3>An error has ocurred </h3>
			</div>
		</div>
		<div id="login-page" class="container-fluid my-3">
			<div class="row">
				<div class="col-sm-9 col-md-7 col-lg-5 mx-auto">
					<div id = "card-login"class="card my-5">
						<div class="card-body">
							<h5 class="card-title text-center">Sign In</h5>
							<form  method="POST">
								<div class="form-group">
									<label for="inputEmail">Username</label>
									<input type="text" id="username" name="username" class="form-control" placeholder="Username" required autofocus>
								</div>
								<div class="form-group">
									<label for="inputPassword">Password</label>							
									<input type="password" id="password" name="password" class="form-control" placeholder="Password" required>
								</div>
								<input class="btn primary-btn btn-block text-uppercase" type="submit" value="Sign in">
								<div class="form-group my-3">
									<a class="link" href="/signup">Don't have account? Sign Up</a>
								</div>
							</form>
						</div>
						<p id="login-error-text"></p>
					</div>
				</div>
			</div>
		</div>
		<div id="signup-page" class="container-fluid my-3">
			<div class="row">
				<div class="col-sm-9 col-md-7 col-lg-5 mx-auto">
					<div class="card my-2">
						<div class="card-body">
							<h5 id="card-signup" class="card-title text-center">Sign Up</h5>
							<form action="sign-up" class="needs-validation" method="POST">
								<div class="form-group">
									<label for="email">Email address</label>
									<input type="email" id="email" name="email" class="form-control" placeholder="Email address" required autofocus>
								</div>
								<div class="form-group">
									<label for="username">Username</label>							
									<input type="text" id="username" name="username" class="form-control" placeholder="Username" required>
								</div>
								<div class="form-group">
									<label for="password">Password</label>							
									<input type="password" id="password" name="password" class="form-control" placeholder="Password" required>
								</div>
								<div class="form-group">
									<label for="passwordRepeated">Password</label>							
									<input type="password" id="passwordRepeated" name="passwordRepeated" class="form-control" placeholder="Confirm Password" required>
								</div>
								<input class="btn btn-lg primary-btn btn-block text-uppercase" type="submit" value="Sign up">
							</form>
						</div>
						<p id="error-text"></p>
					</div>
				</div>
			</div>
		</div>
		<div id="account-page" class="container-fluid my-3">
			<h1>My account</h1>
			<div id="card-account-page" class="card col-6 mx-auto my-3 py-3">
				<h6 id="id-account"></h6>
				<h6 id="username-account"></h6>
				<div class="row text-center">
					<form id="delete-account"class="col-md-6 text-center" action="delete-account" method="DELETE">
						<input type="hidden" name="accountId" id="accountId" value="">
						<button class="btn delete-btn" type="submit">Delete Account</button>
					</form>
				</div>	
			</div>
		</div>
		<div id="account-petitions-page" class="container-fluid my-3">
			<div class="row">
				<div class="col-md-3">
					<div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
						<a class="nav-link active text-center" id="v-pills-home-tab" data-toggle="pill" href="#v-pills-active" role="tab" aria-controls="v-pills-active" aria-selected="true">Active</a>
						<a class="nav-link text-center" id="v-pills-profile-tab" data-toggle="pill" href="#v-pills-done" role="tab" aria-controls="v-pills-done" aria-selected="false">Done</a>
					</div>
				</div>
			   <div class="col-md-9 overflow-auto">
					<div class="tab-content" id="v-pills-tabContent" style="back">
						<div class="tab-pane fade show active" id="v-pills-active" role="tabpanel" aria-labelledby="v-pills-home-tab">
							<div class="row">
								{{#if activePetitions.length}}
									{{#each activePetitions}}
											<div class="col-12 col-md-4">
												<div class="card mb-3 text-center">
													<img class="card-img-top mt-2 image-card" src="{{photo}}" alt="">
													<div class="card-body">
														<h4 class="card-title">{{title}} </h4>
														<p class="card-text">{{place}}</p>
														<div class="row">
															<div class="col-md-6 btn-block-md-6 text-center">
																<a href="/petitions/{{id}}" class="btn btn-block primary-btn">See Details</a>
															</div>
															<div class="col-md-6 text-center">
																<a href="../update-petition/{{id}}" class="btn btn-block primary-btn">Edit</a>
															</div>                                            
														</div>
														<div class="row mt-3">
															<form class="col-12 justify-content-center form-inline" action="/petitions/delete-petition/{{id}}" method="POST">
																<input type="hidden" value="{{account_id}}" name="accountId">
																<button class="btn delete-btn" type="submit">Delete</button>
															</form>
														</div>
													</div>
												</div>
											</div>
											
									{{/each}}
								{{else}}
									<div class="col mt-5 text-center">
										<h4>No petitions yet</h4>
										<a class="mt-3 btn btn-lg primary-btn" href="/petitions/create-petition">Create Petition</a>
									</div>
								{{/if}}
							</div>
						</div>
						<div class="tab-pane fade" id="v-pills-done" role="tabpanel" aria-labelledby="v-pills-profile-tab">
							<div class="row">
								{{#if inactivePetitions.length}}
									{{#each inactivePetitions}}
											<div class="col-md-4">
												<div class="card mb-3">
													<img class="card-img-top image-card" src="{{photo}}" alt="">
													<div class="card-body text-center">
														<h4 class="card-title">{{title}} </h4>
														<p class="card-text">{{place}}</p>
														<div class="row">
															<div class="col-md-6 btn-block-md-6 text-center">
																<a href="/petitions/{{id}}" class="btn btn-block primary-btn">See Details</a>
															</div>
															<div class="col text-center">
																<a href="/purchase/petitions/{{id}}" class="btn primary-btn">See Purchase</a>
															</div>
														</div>
													</div>
												</div>
											</div>
		
									{{/each}}
								{{else}}
									<div class="col mt-5 text-center">
										<h4>No petitions yet</h4>
									</div>
								{{/if}}
							</div>                   
						</div>
					</div>
			   </div>
			</div>
		</div>
		<div id="account-offers-page" class="container-fluid my-3">
		</div>
		<div id="view-petition-page">
			<h2 class="text-center">Petition</h2>
			<div class="row py-3">
				<div id="section-image-offer" class="col-12 col-md-6">

				</div>
				<div id="section-data-petition" class="col col-md-6 py-5">

				</div>
			</div>
		</div>
		<div id="view-offer-page">
			<h2 class="text-center">Offer</h2>

		</div>
	</main>

	<footer class="font-small primary-color text-white footer navbar-fixed-bottom"> 
			<div class="footer-copyright text-center py-3">© 2020 Copyright:
				Made in Jönköping University by Ahiram Cruz and Juan Carlos Pichardo
			</div>
	</footer>
</body>
</html>